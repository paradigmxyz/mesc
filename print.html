<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MESC User Guide</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="A specification for how crypto tools configure their RPC endpoints">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="mesc_overview.html"><strong aria-hidden="true">1.</strong> MESC Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">1.1.</strong> Quickstart</a></li><li class="chapter-item expanded "><a href="what_is_mesc.html"><strong aria-hidden="true">1.2.</strong> What is MESC?</a></li><li class="chapter-item expanded "><a href="why_mesc.html"><strong aria-hidden="true">1.3.</strong> Why MESC?</a></li><li class="chapter-item expanded "><a href="roadmap.html"><strong aria-hidden="true">1.4.</strong> Roadmap</a></li></ol></li><li class="chapter-item expanded "><a href="using_mesc.html"><strong aria-hidden="true">2.</strong> Using MESC</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">2.1.</strong> Setting up MESC</a></li><li class="chapter-item expanded "><a href="profiles.html"><strong aria-hidden="true">2.2.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="metadata.html"><strong aria-hidden="true">2.3.</strong> Metadata</a></li><li class="chapter-item expanded "><a href="overrides.html"><strong aria-hidden="true">2.4.</strong> Overrides</a></li><li class="chapter-item expanded "><a href="queries.html"><strong aria-hidden="true">2.5.</strong> Queries</a></li></ol></li><li class="chapter-item expanded "><a href="developer_resources.html"><strong aria-hidden="true">3.</strong> Developer Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="integrating_mesc.html"><strong aria-hidden="true">3.1.</strong> Integrating MESC</a></li><li class="chapter-item expanded "><a href="implementing_mesc.html"><strong aria-hidden="true">3.2.</strong> Implementing MESC</a></li><li class="chapter-item expanded "><a href="mesc_tests.html"><strong aria-hidden="true">3.3.</strong> MESC Tests</a></li></ol></li><li class="chapter-item expanded "><a href="libraries.html"><strong aria-hidden="true">4.</strong> MESC Libraries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cli.html"><strong aria-hidden="true">4.1.</strong> CLI</a></li><li class="chapter-item expanded "><a href="go.html"><strong aria-hidden="true">4.2.</strong> Go</a></li><li class="chapter-item expanded "><a href="python.html"><strong aria-hidden="true">4.3.</strong> Python</a></li><li class="chapter-item expanded "><a href="rust.html"><strong aria-hidden="true">4.4.</strong> Rust</a></li><li class="chapter-item expanded "><a href="typescript.html"><strong aria-hidden="true">4.5.</strong> TypeScript</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MESC User Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paradigmxyz/mesc" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mesc-overview"><a class="header" href="#mesc-overview">MESC Overview</a></h1>
<p>To <strong>get started quickly</strong>, see <a href="./quickstart.html">Quickstart</a>.</p>
<p>To learn <strong>what MESC is</strong>, see <a href="./what_is_mesc.html">What is MESC?</a>.</p>
<p>To learn the <strong>motivation</strong> behind MESC, see <a href="./why_mesc.html">Why MESC?</a>.</p>
<p>To <strong>integrate</strong> MESC into an existing tool, see <a href="./integrating_mesc.html">Integrating MESC</a>.</p>
<p>To <strong>implement</strong> MESC in a new programming language, see <a href="./implementing_mesc.html">Implementing MESC</a>.</p>
<p>For information about existing MESC implementations, see:</p>
<ul>
<li><a href="./cli.html">CLI</a></li>
<li><a href="./go.html">Go</a></li>
<li><a href="./python.html">Python</a></li>
<li><a href="./rust.html">Rust</a></li>
<li><a href="./typescript.html">TypeScript</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quickstart"><a class="header" href="#quickstart">Quickstart</a></h1>
<p>The quickest way to use MESC is</p>
<ol>
<li>create a <code>mesc.json</code> config file</li>
<li>set the <code>MESC_PATH</code> environment variable to the path of this file</li>
</ol>
<h2 id="creating-a-config-file"><a class="header" href="#creating-a-config-file">Creating a config file</a></h2>
<p>You can create a <code>mesc.json</code> by one of two ways:</p>
<ol>
<li>use the interactive <a href="https://github.com/paradigmxyz/mesc/tree/main/cli">MESC cli tool</a> (install using <code>cargo install mesc_cli</code> and run <code>mesc setup</code>)</li>
<li>modify the template below:</li>
</ol>
<pre><code class="language-json">{
    "mesc_version": "MESC 1.0",
    "default_endpoint": "local_ethereum",
    "network_defaults": {
        "1": "local_ethereum"
    },
    "network_names": {},
    "endpoints": {
        "local_ethereum": {
            "name": "local_ethereum",
            "url": "http://localhost:8545",
            "chain_id": "1",
            "endpoint_metadata": {}
        }
    },
    "profiles": {
        "xyz": {
            "name": "xyz",
            "default_endpoint": "local_ethereum",
            "network_defaults": {
                "1": "local_ethereum"
            },
            "profile_metadata": {},
            "use_mesc": true
        }
    },
    "global_metadata": {}
}
</code></pre>
<p>The structure of the config must follow the MESC <a href="https://github.com/paradigmxyz/mesc/blob/main/SPECIFICATION.md">specification</a>.</p>
<p>Installing the <code>mesc</code> cli on some linux distributions may require installing ssl libraries (e.g. <code>sudo apt-get install pkg-config libssl-dev</code> on ubunutu)</p>
<h2 id="setting-environment-variables"><a class="header" href="#setting-environment-variables">Setting environment variables</a></h2>
<p>The typical way to set environment variables is in your shell configuration files: <code>~/.bashrc</code>, <code>~.profile</code>, and/or <code>~/.bash_profile</code>. Including this line in those files will enable MESC:</p>
<pre><code class="language-bash">export MESC_PATH=/path/to/your/mesc.json
</code></pre>
<p>You can avoid editing these files yourself by running the MESC setup tool (<code>mesc setup</code>) as specified above. It will give you the option to automatically edit your shell files.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="what-is-mesc"><a class="header" href="#what-is-mesc">What is MESC?</a></h1>
<p>MESC (Multiple Endpoint Shared Configuration) is a standardized approach for configuring RPC endpoints. Using MESC, a user creates a single RPC config that is shared by all RPC tools on their system.</p>
<h2 id="design-goals"><a class="header" href="#design-goals">Design Goals</a></h2>
<p>MESC has two main design goals:</p>
<ol>
<li>make it easy to share RPC configuration data across tools, languages, and environments</li>
<li>make it easy to manage the configuration of a large number of RPC endpoints</li>
</ol>
<p>MESC also has many secondary goals. It aims to be a solution that:</p>
<ul>
<li>allows specifying multiple providers for multiple chains</li>
<li>allows selection of a default endpoint for each chain</li>
<li>allows using either environment variables or config files</li>
<li>is a single source of truth across multiple tools</li>
<li>is OS-agnostic, using no OS-specific features</li>
<li>is language-agnostic, using no language-specific features</li>
<li>is backwards compatible with previous solutions</li>
</ul>
<h2 id="mesc-is-opt-in"><a class="header" href="#mesc-is-opt-in">MESC is opt-in</a></h2>
<p>MESC is an <strong>opt-in</strong> standard: MESC is only enabled if a user has set a MESC-specific environment variable in their environment. This maximizes backward-compatiblity for existing tools that want to integrate MESC: If a user has not opted-in to MESC then simply fall back to the existing configuration method.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="why-mesc"><a class="header" href="#why-mesc">Why MESC?</a></h1>
<p>Between mainnet, testnets, chainforks, rollups, and alternative L1's, modern crypto tools must manage the configuration of multiple RPC endpoints. This configuration process is not standardized across tools.</p>
<p>The most common approach for configuring RPC endpoint information is the <code>ETH_RPC_URL</code> environment variable (dapptools, forge, heimdall, checkthechain). However, this is not a formal standard and many tools use other approaches. Furthermore, using <code>ETH_RPC_URL</code> can only specify a single provider for a single chain, and it cannot specify any provider metadata beyond the url.</p>
<p>Instead it would be desirable to have a solution that:</p>
<ul>
<li>allows specifying multiple providers for multiple chains</li>
<li>allows selection of a default endpoint for each chain</li>
<li>allows using either environment variables or config files</li>
<li>is a single source of truth across multiple tools</li>
<li>is OS-agnostic, using no OS-specific features</li>
<li>is language-agnostic, using no language-specific features</li>
<li>is backwards compatible with previous solutions</li>
</ul>
<p>MESC aims to satisfy all of these constraints.</p>
<h2 id="as-a-developer-why-should-i-integrate-mesc-into-my-tools"><a class="header" href="#as-a-developer-why-should-i-integrate-mesc-into-my-tools">As a developer, why should I integrate MESC into my tools?</a></h2>
<ul>
<li><strong>Easier Onboarding</strong>. As soon as a user installs your tool, they will be able to use your tool with all of their configured networks. This eliminates one of the major setup steps for most RPC consuming tools.</li>
<li><strong>Interoperability</strong>. If you maintain multiple tools, or your tool has components in multiple languages, MESC will create a single, shared source of truth across all of these tool components.</li>
<li><strong>Safety and Robustness</strong>. MESC is thoroughly tested against a large number of config-related edge cases. In many cases it will be safer to user MESC than to create a configuration system from scratch.</li>
<li><strong>Minimize maintenance burden</strong>. Leaning on MESC to handle configuration means there is one less thing you need to maintain. You can spend your time on other things.</li>
<li><strong>Developer Features</strong>. If you need to develop or test your tool with multiple endpoints, the <code>mesc</code> CLI tools contains many useful developer features for managing endpoints.</li>
<li><strong>Go config-free</strong>. In some cases, adopting MESC means that your tool no longer needs its own config. You can store your tool's config data in MESC's metadata and then just use MESC for all config IO.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roadmap"><a class="header" href="#roadmap">Roadmap</a></h1>
<p>Once the MESC specification reaches version 1.0, it will become ossified forever. This will maximize forward- and backward-compatibility between MESC integrations. Client libraries for reading or writing MESC configurations might continue development, but the underlying MESC specification will not change.</p>
<p>MESC currently has implementations for CLI, python, and rust. Implementations for go and typescript are coming soon. If there is another language you have interest in bringing MESC to an additional programming language or environment, feel free to share on the <a href="https://github.com/paradigmxyz/mesc">issue tracker</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-mesc"><a class="header" href="#using-mesc">Using MESC</a></h1>
<ul>
<li>To set MESC up, see <a href="./setting_up_mesc.html">Setup up MESC</a></li>
<li>To use different MESC settings for different tools, see <a href="./profiles.html">Profiles</a></li>
<li>To use MESC for tracking miscellaneous metadata, see <a href="./metadata.html">Metadata</a></li>
<li>To quickly override MESC settings without editing files, see <a href="./overrides.html">Overrides</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-mesc"><a class="header" href="#setting-up-mesc">Setting up MESC</a></h1>
<h2 id="basic-setup"><a class="header" href="#basic-setup">Basic setup</a></h2>
<p>MESC becomes enabled by setting one or more environment variables.</p>
<p>In the simplest case, only one variable necessary: <code>MESC_PATH</code> is set to the path of a <code>mesc.json</code> config file.</p>
<p>As described in the <a href="./quickstart.html">quickstart</a>, the <code>mesc.json</code> file is usually created using either 1) the interactive <code>mesc setup</code> command, or 2) copying from a starter template. The quickstart guide also describes how to set environment variables in your terminal shell.</p>
<h2 id="alternative-setup-without-a-mescjson"><a class="header" href="#alternative-setup-without-a-mescjson">Alternative setup without a <code>mesc.json</code></a></h2>
<p>Sometimes it is convenient to configure a system without editing any files (e.g. inside a container, or on a network drive, or in a low-privilege environment).</p>
<p>This can be accomplished with MESC by setting the <code>MESC_ENV</code> variable instead of the <code>MESC_PATH</code> variable. <code>MESC_ENV</code> should simply contain the JSON content of a MESC configuration.</p>
<p>If both <code>MESC_PATH</code> and <code>MESC_ENV</code> are set, you can select which one to use by setting <code>MESC_MODE</code> to either <code>PATH</code> or <code>ENV</code>. <code>MESC_PATH</code> takes precedence over <code>MESC_ENV</code> if <code>MESC_MODE</code> is not set.</p>
<h2 id="disabling-mesc"><a class="header" href="#disabling-mesc">Disabling MESC</a></h2>
<p>MESC can be disabled by either 1) unsetting all <code>MESC_*</code> variables, or 2) setting <code>MESC_MODE=DISABLED</code>.</p>
<p>If MESC is disabled, the <code>is_mesc_disabled()</code> function will return <code>false</code> and all MESC querying functions will return an error (depending on language).</p>
<h2 id="overrides"><a class="header" href="#overrides">Overrides</a></h2>
<p>MESC also uses environment variables for overrides. See the <a href="overrides.html">overrides</a> section for details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="profiles"><a class="header" href="#profiles">Profiles</a></h1>
<p>Profiles are a way for each tool to customize its own MESC settings.</p>
<p>Profiles allow each tool to:</p>
<ul>
<li>set its own default endpoint</li>
<li>set its own default endpoints for each network</li>
<li>override global metadata with its own metadata</li>
<li>avoid using MESC for that tool without disabling MESC globally</li>
</ul>
<h2 id="profiles-are-an-optional-feature"><a class="header" href="#profiles-are-an-optional-feature">Profiles are an optional feature</a></h2>
<p>If a MESC query does not specify a profile, the global configuration values are used.</p>
<p>If a MESC query specifies a profile, but that profile does not exist or does not specify the relevant information, MESC will fallback to using global configuration values.</p>
<h2 id="setting-up-a-profile"><a class="header" href="#setting-up-a-profile">Setting up a profile</a></h2>
<p>The easiest way to create a profile is by using the interactive <code>mesc</code> cli tool, using the <code>mesc setup</code> subcommand.</p>
<p>Alternatively, you can manually add a new <code>Profile</code> to the <code>profiles</code> key inside your <code>mesc.json</code>. The following is a template <code>Profile</code>:</p>
<pre><code class="language-json">{
    "name": "PROFILE_NAME",
    "default_endpoint": null,
    "network_defaults": {},
    "profile_metadata": {},
    "use_mesc": true
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="metadata"><a class="header" href="#metadata">Metadata</a></h1>
<p>In a MESC configuration, the <code>global_metadata</code>, <code>profile_metadata</code>, and <code>endpoint_metadata</code> fields allow for optional or idiosyncratic metadata to be stored alongside the core RPC data.</p>
<p>Tools using MESC can choose to ignore these fields.</p>
<h2 id="metadata-fields"><a class="header" href="#metadata-fields">Metadata fields</a></h2>
<p>Contents of MESC metadata is only loosely specified. This is intentional to allow for some degree of future-proofing. It enables MESC to handle use-cases that are either unanticipated or highly-specific to a given tool.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p><strong>Endpoint metadata</strong></p>
<div class="table-wrapper"><table><thead><tr><th>key</th><th>value type</th><th>description</th><th>examples</th></tr></thead><tbody>
<tr><td><code>rate_limit_rps</code></td><td><code>int</code> or <code>float</code></td><td>ratelimit in requests per second</td><td><code>250</code></td></tr>
<tr><td><code>rate_limit_cups</code></td><td><code>int</code> or <code>float</code></td><td>ratelimit in CUPS</td><td><code>1000</code></td></tr>
<tr><td><code>rate_limit_per_method</code></td><td><code>Mapping[str, int or float]</code></td><td>ratelimit in RPS for each method</td><td><code>{"trace_block": 200}</code></td></tr>
<tr><td><code>api_key</code></td><td><code>str</code></td><td>api key</td><td><code>a2798f237a2398rf7</code></td></tr>
<tr><td><code>jwt_secret</code></td><td><code>str</code></td><td>jwt secret</td><td></td></tr>
<tr><td><code>host</code></td><td><code>str</code></td><td>name of provider host</td><td><code>"llamanodes"</code>, <code>"alchemy"</code>, <code>"quicknode"</code>, <code>"localhost"</code></td></tr>
<tr><td><code>ecosystem</code></td><td><code>str</code></td><td>ecosystem of chain, (e.g. relates mainnets to testnets)</td><td><code>"ethereum"</code>, <code>"polygon"</code></td></tr>
<tr><td><code>node_client</code></td><td><code>str</code></td><td>versioned node client</td><td><code>erigon/2.48.1/linux-amd64/go1.20.5</code> <code>reth/v0.1.0-alpha.10-7b781eb60/x86_64-unknown-linux-gnu</code></td></tr>
<tr><td><code>namespaces</code></td><td><code>Sequence[str]</code></td><td>RPC name spaces enabled for endpoint</td><td><code>["eth", "trace, "debug"]</code></td></tr>
<tr><td><code>explorer</code></td><td><code>str</code></td><td>block explorer url</td><td><code>https://etherscan.io</code></td></tr>
<tr><td><code>location</code></td><td><code>str</code></td><td>geographic region</td><td><code>Paris, France</code></td></tr>
<tr><td><code>cloud_region</code></td><td><code>str</code></td><td>cloud provider region</td><td><code>aws-us-east-1a</code></td></tr>
<tr><td><code>labels</code></td><td><code>Sequence[str]</code></td><td>tags</td><td><code>private_mempool</code>, <code>cache</code>, <code>archive</code>, <code>consensus_layer</code>, <code>execution_layer</code>, <code>validator</code>, <code>ephemeral</code></td></tr>
</tbody></table>
</div>
<p><strong>Global Metadata</strong> and <strong>Profile Metadata</strong></p>
<div class="table-wrapper"><table><thead><tr><th>key</th><th>value type</th><th>description</th><th>examples</th></tr></thead><tbody>
<tr><td><code>last_modified_by</code></td><td><code>str</code></td><td>versioned tool used to create configuration</td><td><code>mesc__1.0</code></td></tr>
<tr><td><code>last_modified_time</code></td><td><code>int</code></td><td>timestamp of config modification</td><td><code>1700200462</code></td></tr>
<tr><td><code>creation_time</code></td><td><code>int</code></td><td>timestamp of config creation</td><td><code>1700200462</code></td></tr>
<tr><td><code>api_keys</code></td><td><code>Mapping[str, str]</code></td><td>API keys to RPC-related services</td><td><code>{"etherscan": "abc123"}</code></td></tr>
<tr><td><code>groups</code></td><td><code>Mapping[str, Sequence[str]]</code></td><td>groupings of endpoints, mapping of group name to list of endpoint names</td><td><code>{"load_balancer": ["alchemy_optimism", "quicknode_optimism"]}</code></td></tr>
<tr><td><code>conceal</code></td><td><code>bool</code></td><td>whether tool should avoid casually revealing private RPC url's unprompted</td><td><code>true</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="overrides-1"><a class="header" href="#overrides-1">Overrides</a></h1>
<p>Overrides are a way to quickly modify a MESC configuration without needing to modify any files.</p>
<p>Each override is an environment variable that overrides a specific MESC configuration key.</p>
<p>Each override uses a syntax that is quick and easy to write by hand.</p>
<h2 id="example-usage"><a class="header" href="#example-usage">Example usage</a></h2>
<p>The <code>MESC_DEFAULT_ENDPOINT</code> override changes the default endpoint.</p>
<h4 id="use-in-a-script"><a class="header" href="#use-in-a-script">Use in a script</a></h4>
<p>Sometimes it might be useful tweak a MESC config for a shell script. This can be achieved by inserting the MESC overrides into the script:</p>
<pre><code class="language-bash">#!/usr/bin/env bash

export MESC_DEFAULT_ENDPOINT=local_goerli

# ...rest of script that does RPC things
</code></pre>
<h4 id="prepending-syntax"><a class="header" href="#prepending-syntax">Prepending syntax</a></h4>
<p>Adding <code>VAR_NAME=VAR_VALUE</code> before a cli command will set an environment variable for just that command.</p>
<p>So if before the default url is this:</p>
<pre><code class="language-bash">mesc url
&gt; https://eth.llamarpc.com
</code></pre>
<p>Adding the override before the command will change the default url:</p>
<pre><code class="language-bash">MESC_DEFAULT_ENDPOINT=local_goerli mesc url
&gt; localhost:8545
</code></pre>
<p>This syntax works for any cli program, not just the <code>mesc</code> cli tool.</p>
<h2 id="list-of-overrides"><a class="header" href="#list-of-overrides">List of overrides</a></h2>
<p>Every type of information within a MESC configuration can be modified using overrides:</p>
<div class="table-wrapper"><table><thead><tr><th>override variable</th><th>value syntax</th><th>example</th></tr></thead><tbody>
<tr><td><code>MESC_DEFAULT_ENDPOINT</code></td><td>url, endpoint name, or network name</td><td><code>localhost:9999</code></td></tr>
<tr><td><code>MESC_NETWORK_DEFAULTS</code></td><td>space-separated pairs of <code>&lt;chain_id&gt;=&lt;endpoint&gt;</code></td><td><code>5=alchemy_optimism 1=local_mainnet</code></td></tr>
<tr><td><code>MESC_NETWORK_NAMES</code></td><td>space-separated pairs of <code>&lt;network_name&gt;=&lt;chain_id&gt;</code></td><td><code>zora=7777777</code></td></tr>
<tr><td><code>MESC_ENDPOINTS</code></td><td>space-separated items of <code>[&lt;endpoint_name&gt;[:&lt;chain_id&gt;]=]&lt;url&gt;</code></td><td><code>alchemy_optimism=https://alchemy.com/fjsj local_goerli:5=localhost:8545</code></td></tr>
<tr><td><code>MESC_PROFILES</code></td><td>space-separated pairs of <code>&lt;profile&gt;.&lt;key&gt;[.&lt;subkey]=&lt;endpoint&gt;</code></td><td><code>foundry.default_endpoint=local_goerli foundry.network_defaults.5=alchemy_optimism</code></td></tr>
<tr><td><code>MESC_GLOBAL_METADATA</code></td><td>JSON formatted global metadata</td><td><code>{}</code></td></tr>
<tr><td><code>MESC_ENDPOINT_METADATA</code></td><td>JSON mapping of <code>{"endpoint_name": {&lt;ENDPOINT_METADATA&gt;}}</code></td><td><code>{}</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="querying-mesc-data"><a class="header" href="#querying-mesc-data">Querying MESC data</a></h1>
<p>Each MESC implementation provides the same set of 7 functions for querying MESC data.</p>
<p>The behavior of these functions is the same across languages.</p>
<div class="table-wrapper"><table><thead><tr><th>function</th><th>output type</th><th>description</th><th>example call</th></tr></thead><tbody>
<tr><td><code>is_mesc_enabled()</code></td><td><code>bool</code></td><td>return whether MESC is enabled</td><td><code>is_mesc_enabled()</code></td></tr>
<tr><td><code>get_default_endpoint()</code></td><td><code>Endpoint</code> or <code>None</code></td><td>get default MESC endpoint</td><td><code>get_default_endpoint(profile='xyz')</code></td></tr>
<tr><td><code>get_endpoint_by_network()</code></td><td><code>Endpoint</code> or <code>None</code></td><td>get default endpoint for network</td><td><code>get_endpoint_by_network(5, profile='xyz')</code></td></tr>
<tr><td><code>get_endpoint_by_name()</code></td><td><code>Endpoint</code> or <code>None</code></td><td>get endpoint by name</td><td><code>get_endpoint_by_name('local_goerli')</code></td></tr>
<tr><td><code>get_endpoint_by_query()</code></td><td><code>Endpoint</code> or <code>None</code></td><td>get endpoint for user input query</td><td><code>get_endpoint_by_query(user_str, profile='xyz')</code></td></tr>
<tr><td><code>find_endpoints()</code></td><td><code>Sequence[Endpoint]</code></td><td>find endpoint that match input criteria</td><td><code>find_endpoints(chain_id=5)</code></td></tr>
<tr><td><code>get_global_metadata()</code></td><td><code>Mapping[str, Any]</code></td><td>get non-endpoint metadata</td><td><code>get_global_metadata(profile='xyz')</code></td></tr>
</tbody></table>
</div>
<p>The <code>profile</code> argument is optional for each function (it allows users to customize the settings for each tool, see <a href="./profiles.html">Profiles</a> for details).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="developer-resources"><a class="header" href="#developer-resources">Developer Resources</a></h1>
<p>The MESC specification and its reference implementations are developed in the <a href="https://github.com/paradigmxyz/mesc">github repository</a>.</p>
<ul>
<li>For information about integrating MESC into an existing tool, see <a href="./integrating_mesc.html">Integrating MESC</a>.</li>
<li>For information about implementing a new MESC client, see <a href="./implementing_mesc.html">Implementing MESC</a>.</li>
<li>For information about running MESC tests, see <a href="https://github.com/paradigmxyz/mesc/tree/main/tests">MESC Test README</a>.</li>
<li>For information about building these docs, see <a href="https://github.com/paradigmxyz/mesc/tree/main/book">here</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="integrating-mesc"><a class="header" href="#integrating-mesc">Integrating MESC</a></h1>
<p>MESC is designed to be easy to integrate into any existing tool in a backward-compatible manner.</p>
<p>MESC integration patterns can be designed so that they only affect users that have opted-in to MESC, while leaving other users unaffected.</p>
<p>Examples below are shown in python but work nearly identically for each language.</p>
<h2 id="workflow-for-getting-the-default-rpc-endpoint"><a class="header" href="#workflow-for-getting-the-default-rpc-endpoint">Workflow for getting the default RPC endpoint</a></h2>
<p>Let's say that an existing tool named <code>xyz</code> currently gets its default RPC endpoint from an environment variable <code>ETH_RPC_URL</code> like so:</p>
<pre><code class="language-python">def get_default_rpc_url() -&gt; str | None:
    return os.environ.get('ETH_RPC_URL')
</code></pre>
<p>MESC can be integrated using a few lines of code:</p>
<pre><code class="language-python">import mesc

def get_default_rpc_url() -&gt; str | None:
    if mesc.is_mesc_enabled():
        endpoint = mesc.get_default_endpoint(profile='xyz')
        if endpoint is not None:
            return endpoint['url']
    return os.environ.get('ETH_RPC_URL')
</code></pre>
<p>This new function loads the MESC default endpoint for users that have opted-in to MESC. But it falls back to using <code>ETH_RPC_URL</code> if MESC is not enabled or MESC does not have a default endpoint set.</p>
<p>Using <code>profile='xyz'</code> is optional, but it allows users to set custom settings for the <code>xyz</code> tool instead of using the global settings.</p>
<h2 id="workflow-for-letting-users-select-an-rpc-endpoint"><a class="header" href="#workflow-for-letting-users-select-an-rpc-endpoint">Workflow for letting users select an RPC endpoint</a></h2>
<p>Let's say that an existing tool named <code>xyz</code> currently lets users choose an RPC endpoint using an <code>-r</code> input argument. Users might use the tool in a similar manner to <code>xyz -r https://eth.llamarpc.com</code> or <code>xyz -r localhost:8545</code>.</p>
<p>If we add an extra parsing step for the user input, we can allow the user to select from any endpoint inside the MESC configuration by name, by network name, or by chain id. Using a pattern like this:</p>
<pre><code class="language-python">def get_endpoint_url(user_input: str) -&gt; str:
    if mesc.is_mesc_enabled():
        endpoint = mesc.get_endpoint_by_query(user_input)
        if endpoint is not None:
            return endpoint['url']
    return user_input

# ...

url = get_endpoint_url(user_input)
</code></pre>
<p>Then users will be able to do any of the following</p>
<ul>
<li><code>xyz -r localhost:8545</code> (use a url)</li>
<li><code>xyz -r llamanodes_goerli</code> (use the endpoint named <code>llamanodes_goerli</code>)</li>
<li><code>xyz -r 5</code> (use the default endpoint for network with chain id <code>5</code>)</li>
<li><code>xyz -r goerli</code> (use the default endpoint for the network named <code>goerli</code>)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="implementing-mesc"><a class="header" href="#implementing-mesc">Implementing MESC</a></h1>
<p>One of MESC's goals is to have an implementation for every programming language in the cryptocurrency ecosystem.</p>
<p>If you are creating a new MESC implementation, you may find the following useful:</p>
<ol>
<li>
<p>The main functionality that a MESC implementation provides is the <a href="https://github.com/paradigmxyz/mesc/blob/main/SPECIFICATION.md#reference-implementation">core MESC interface</a>. This is a set of functions for reading whatever MESC data a user has configured on their system.</p>
</li>
<li>
<p>The ability to <strong>write</strong> MESC configurations is useful, but should be considered a secondary goal. Users already have the ability to create MESC configurations either by 1) editing JSON by hand, 2) editing JSON programmatically, or 3) using the interactive <a href="https://github.com/paradigmxyz/mesc/tree/main/cli">MESC cli tool</a>.</p>
</li>
<li>
<p>A MESC implementation's compliance to the specification can be checked using the language-agnostic MESC test suite. Passing the test suite means that an implementation is complete. More details on the test suite can be found <a href="https://github.com/paradigmxyz/mesc/tree/main/tests">here</a>.</p>
</li>
<li>
<p>It is desirable to use the same names, types, and behaviors across each MESC implementation. This increases interoperability and makes MESC easier to learn and use. However it is also desirable to obey the common conventions of each programming language. Each MESC implementation must find a balance between language-agnostic conventions vs language-specific conventions.</p>
</li>
<li>
<p>If parts of the MESC specification are confusing or difficult to implement, it may be helpful to look at existing implementations. These currently exist for <a href="https://github.com/paradigmxyz/mesc/tree/main/python">python</a> and <a href="https://github.com/paradigmxyz/mesc/tree/main/rust">rust</a>.</p>
</li>
</ol>
<h2 id="implementation-checklist"><a class="header" href="#implementation-checklist">Implementation Checklist</a></h2>
<ol>
<li>Implement the <a href="https://paradigmxyz.github.io/mesc/queries.html">core MESC interface</a> functions. These functions should have the same behavior in each implementation.</li>
<li>Create an adapter to run the <a href="https://github.com/paradigmxyz/mesc/tree/main/tests">MESC test suite</a>. Passing these tests means the implementation is fully compliant with the MESC specification.</li>
<li>Add an entry to the <a href="https://github.com/paradigmxyz/mesc/blob/main/python/generate_network_names.py">generate_network_names.py</a> script. This script creates a native language code file for mapping between network names and chain id's using the standard <a href="https://github.com/ethereum-lists/chains">ethereum-lists/chains</a> repository.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mesc-tests"><a class="header" href="#mesc-tests">MESC Tests</a></h1>
<p>A language-agnostic set of tests is used to check whether each MESC implementation is compliant with the MESC specification.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<ol>
<li>
<p>Install <code>pytest</code> with <code>pytest-xdist</code>: <code>pip install pytest pytest-xdist</code></p>
</li>
<li>
<p>Go to the tests directory: <code>cd $MESC_REPO/mesc/tests</code></p>
</li>
<li>
<p>Run one of these commands:</p>
</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th>description</th><th>command</th></tr></thead><tbody>
<tr><td>run tests</td><td><code>pytest</code></td></tr>
<tr><td>run test in parallel mode (much faster)</td><td><code>pytest -n auto</code></td></tr>
<tr><td>run tests in debug mode (helpful for debugging)</td><td><code>pytest --pdb</code></td></tr>
<tr><td>run tests only tests that previously failed</td><td><code>pytest --lf</code></td></tr>
<tr><td>run tests for specific adapters only</td><td><code>pytest --adapters adapters/python adapters/cli</code></td></tr>
</tbody></table>
</div>
<p>By default, tests will run for all MESC implementations. If you do not have all of these implementations installed, you will need to use <code>--adapters</code> to select only the subset that that you have installed.</p>
<h2 id="adapters"><a class="header" href="#adapters">Adapters</a></h2>
<p>Each MESC implementation has an adapter that receives a test as input and prints the result as output. Adapters are located in the <a href="https://github.com/paradigmxyz/mesc/tree/main/tests/adapters">adapters</a> directory.</p>
<p>To make a custom adapter:</p>
<ol>
<li>adapter should be a script that takes a JSON <a href="https://github.com/paradigmxyz/mesc/blob/5cb1086c237f2b38c3a3095466823f3d64a62052/python/mesc/types.py#L115"><code>MescQuery</code></a> as its single argument</li>
<li>the adapter should run the query, and then print the result as JSON</li>
<li>if the config loading or the query fails, simply print the word <code>FAIL</code></li>
</ol>
<p>The adapter should never crash upon failure, just print the word <code>FAIL</code></p>
<h2 id="files"><a class="header" href="#files">Files</a></h2>
<ul>
<li><code>adapters/</code> contains a test adapter for each MESC implementation</li>
<li><code>conftest.py</code> configuration file for pytest</li>
<li><code>generate.py</code> generates all of the MESC test cases</li>
<li><code>test_mesc.py</code> packages MESC tests into form usable by pypi</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mesc-libraries"><a class="header" href="#mesc-libraries">MESC Libraries</a></h1>
<p>MESC aims to have an implementation for every common language in the cryptocurrency ecosystem.</p>
<p>Implementations currently exist for:</p>
<ul>
<li><a href="./cli.html">CLI</a></li>
<li><a href="./go.html">Go</a></li>
<li><a href="./python.html">Python</a></li>
<li><a href="./rust.html">Rust</a></li>
<li><a href="./typescript.html">TypeScript</a></li>
</ul>
<p>If you want to create a MESC implementation for a new language, see <a href="./implementing_mesc.html">implementing MESC</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mesc-cli"><a class="header" href="#mesc-cli">MESC CLI</a></h1>
<p>This is a utility for creating and managing MESC RPC configurations.</p>
<p>Under the hood, this cli is implemented using the rust crate <a href="../rust/crates/mesc_cli">here</a>.</p>
<p>The most important cli subcommands:</p>
<ol>
<li><code>mesc setup</code>: create and modify MESC configs</li>
<li><code>mesc ls</code>: list endpoints</li>
<li><code>mesc ping</code>: ping endpoints</li>
<li><code>mesc url</code>: print endpoint url</li>
</ol>
<p>View help for each subcommand by typing <code>mesc [SUBCOMMAND] --help</code></p>
<p><img src="https://github.com/paradigmxyz/mesc/assets/7907648/2f84d90b-9cfd-42fd-89f1-bd35949e1c14" alt="basics" /></p>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="cli.html#installation">Installation</a></li>
<li><a href="cli.html#example-usage">Example Usage</a></li>
<li><a href="cli.html#reference">Reference</a></li>
</ul>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>Use one of the 3 options below. Check that <code>mesc</code> is properly installed and on your <code>PATH</code> by running <code>mesc -h</code>.</p>
<h3 id="install-from-cratesio"><a class="header" href="#install-from-cratesio">Install from crates.io</a></h3>
<p><code>cargo install mesc_cli</code></p>
<p>Ensure that your cargo install path is on your cli path</p>
<h3 id="install-from-source"><a class="header" href="#install-from-source">Install from source</a></h3>
<pre><code class="language-console"># install rust and cargo
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# install mesc
git clone https://github.com/paradigmxyz/mesc
cd mesc
cargo install --path rust/crates/cli
</code></pre>
<h2 id="example-usage-1"><a class="header" href="#example-usage-1">Example Usage</a></h2>
<p>Quickly obtain RPC url's:</p>
<pre><code class="language-console"># curl the default network rpc url
curl $(mesc url) ...

# curl the default goerli url
curl $(mesc url goerli) ...

# curl an endpoint by name
curl $(mesc url local_goerli) ...
</code></pre>
<p>Print configuration data</p>
<pre><code class="language-console"># print all endpoints in table
mesc ls

# ping endpoints and collect metadata
mesc ping

# print default goerli endpoint data, human readable
mesc endpoint goerli

# print default goerli endpoint data, as json
mesc endpoint goerli --json
</code></pre>
<h2 id="reference"><a class="header" href="#reference">Reference</a></h2>
<p>Show in terminal by typing <code>mesc --help</code>:</p>
<pre><code>command line interface for creating, loading, and modifying MESC configuration data

Usage: mesc &lt;COMMAND&gt;

Commands:
  setup     Create or modify config interactively
  import    Modify config by importing from file or other source
  set       Modify config by setting specific values
  ping      Ping endpoints and fetch metadata
  defaults  Print list of defaults
  endpoint  Print endpoint
  help      Print help
  ls        Print list of endpoints
  metadata  Print metadata
  status    Print status of configuration
  url       Print endpoint URL

Options:
  -h, --help     Print help
  -V, --version  Print version

Help topics: (print these with mesc help &lt;TOPIC&gt;)
  env       Environmental variables
  python    Python interface
  rust      Rust interface
  schema    Schemas of configs, endpoints, and profiles
  setup     How to set up MESC
</code></pre>
<ul>
<li>If an endpoint is omitted, use the default endpoint</li>
<li>If a chain_id or network name is provided, use the default endpoint of network</li>
<li>Can use <code>--profile PROFILENAME</code> to use defaults of a particular profile</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="go-mesc-implementation"><a class="header" href="#go-mesc-implementation">Go MESC Implementation</a></h1>
<p>This is a reference implementation of the Go MESC standard.</p>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<p>To use this project within your Golang project, execute the following within your project:</p>
<pre><code>go get github.com/paradigmxyz/mesc/go
</code></pre>
<h2 id="example-usage-2"><a class="header" href="#example-usage-2">Example Usage</a></h2>
<p>// TODO: pending doc</p>
<h2 id="reference-1"><a class="header" href="#reference-1">Reference</a></h2>
<p>Refer to the function signatures defined in <a href="pkg/mesc/endpoints.go">endpoints.go</a> for the list of available functions.</p>
<p>Models are available in the <a href="pkg/mesc/model">model</a> package.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="python-mesc-implementation"><a class="header" href="#python-mesc-implementation">Python MESC Implementation</a></h1>
<p>This is a reference implementation of the Python MESC Standard</p>
<p>It has no external dependencies.</p>
<ul>
<li><a href="python.html#installation">Installation</a></li>
<li><a href="python.html#example-usage">Example Usage</a></li>
<li><a href="python.html#reference">Reference</a></li>
</ul>
<h2 id="installation-2"><a class="header" href="#installation-2">Installation</a></h2>
<h3 id="from-pypi"><a class="header" href="#from-pypi">From PyPI</a></h3>
<p><code>pip install mesc</code></p>
<h3 id="from-source"><a class="header" href="#from-source">From Source</a></h3>
<pre><code>git clone https://github.com/paradigmxyz/mesc
cd mesc
pip install ./
</code></pre>
<h2 id="example-usage-3"><a class="header" href="#example-usage-3">Example Usage</a></h2>
<pre><code class="language-python">from typing import Any, Mapping, Sequence
import mesc

# check whether mesc is enabled
enabled: bool = mesc.is_mesc_enabled()

# get the default endpoint
endpoint: Endpoint | None = mesc.get_default_endpoint()

# get the default endpoint of a network
endpoint: Endpoint | None = mesc.get_endpoint_by_network(5)

# get the default endpoint for a particular tool
endpoint: Endpoint | None = mesc.get_default_endpoint(profile='xyz_tool')

# get the default endpoint of a network for a particular tool
endpoint: Endpoint | None = mesc.get_endpoint_by_network(5, profile='xyz_tool')

# get an endpoint by name
endpoint: Endpoint | None = mesc.get_endpoint_by_name('local_goerli')

# parse a user-provided string into a matching endpoint
# (first try 1. endpoint name, then 2. chain id, then 3. network name)
endpoint: Endpoint | None = mesc.get_endpoint_by_query(user_str, profile='xyz_tool')

# find all endpoints matching given criteria
endpoints: Sequence[Endpoint] = mesc.find_endpoints(chain_id=5)

# get non-endpoint metadata
metadata: Mapping[str, Any] = mesc.get_global_metadata(profile='xyz_tool')
</code></pre>
<h2 id="reference-2"><a class="header" href="#reference-2">Reference</a></h2>
<pre><code class="language-python">from typing import Any, MutableMapping, TypedDict, Literal, Sequence

class RpcConfig(TypedDict):
    mesc_version: str
    default_endpoint: str | None
    endpoints: MutableMapping[str, Endpoint]
    network_defaults: MutableMapping[str, str]
    network_names: MutableMapping[str, str]
    profiles: MutableMapping[str, Profile]
    global_metadata: MutableMapping[str, Any]

class Endpoint(TypedDict):
    name: str
    url: str
    chain_id: str | None
    endpoint_metadata: MutableMapping[str, Any]

class Profile(TypedDict):
    name: str
    default_endpoint: str | None
    network_defaults: MutableMapping[str, str]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-mesc-implementation"><a class="header" href="#rust-mesc-implementation">Rust MESC Implementation</a></h1>
<p>This is a reference rust implementation of the MESC standard.</p>
<p>The <code>crates/mesc</code> crate contains rust libraries for reading, writing, and validating MESC configurations.</p>
<p>The <code>crates/mesc_cli</code> crate is a tool for reading, writing, and validating MESC from the command line. See <a href="../cli">CLI</a> for details.</p>
<h3 id="contents-1"><a class="header" href="#contents-1">Contents</a></h3>
<ul>
<li><a href="rust.html#Installation">Installation</a></li>
<li><a href="rust.html#Example-Usage">Example-Usage</a></li>
<li><a href="rust.html#Reference">Reference</a></li>
</ul>
<h2 id="installation-3"><a class="header" href="#installation-3">Installation</a></h2>
<p>Inside a cargo project: <code>cargo add mesc</code></p>
<p>Inside a <code>Cargo.toml</code>: <code>mesc = "0.2.0"</code></p>
<h2 id="example-usage-4"><a class="header" href="#example-usage-4">Example Usage</a></h2>
<p>Basic data structures</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Serialize, Deserialize, Debug, Clone)]
pub struct RpcConfig {
    pub mesc_version: String,
    pub default_endpoint: Option&lt;String&gt;,
    pub endpoints: HashMap&lt;String, Endpoint&gt;,
    pub network_defaults: HashMap&lt;ChainId, String&gt;,
    pub network_names: HashMap&lt;String, ChainId&gt;,
    pub profiles: HashMap&lt;String, Profile&gt;,
    pub global_metadata: HashMap&lt;String, serde_json::Value&gt;,
}

#[derive(Serialize, Deserialize, Debug, Clone)]
pub struct Endpoint {
    pub name: String,
    pub url: String,
    pub chain_id: Option&lt;ChainId&gt;,
    pub endpoint_metadata: HashMap&lt;String, serde_json::Value&gt;,
}

#[derive(Serialize, Deserialize, Debug, Clone)]
pub struct Profile {
    pub name: String,
    pub default_endpoint: Option&lt;String&gt;,
    pub network_defaults: HashMap&lt;ChainId, String&gt;,
    pub profile_metadata: HashMap&lt;String, serde_json::Value&gt;,
    pub use_mesc: bool,
}

#[derive(Serialize, Deserialize, Debug, Clone, Eq, PartialEq, Hash)]
pub struct ChainId(String);
<span class="boring">}</span></code></pre></pre>
<p>Basic read functions</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use mesc::{MescError, Endpoint};
use std::collections::HashMap;

type OptionalResult = Result&lt;Option&lt;Endpoint&gt;, MescError&gt;;
type MultiResult = Result&lt;Vec&lt;Endpoint&gt;, MescError&gt;;
type MetadataResult = Result&lt;HashMap&lt;String, serde_json::Value&gt;, MescError&gt;;

// check whether mesc is enabled
let enabled: bool = mesc::is_mesc_enabled();

// get the default endpoint
let endpoint: OptionalResult = mesc::get_default_endpoint(None);

// get the default endpoint of a network
let endpoint: OptionalResult = mesc::get_endpoint_by_network("5", None);

// get the default network for a particular tool
let chain_id: OptionalResult = mesc::get_default_endpoint(Some("xyz_tool"));

// get the default endpoint of a network for a particular tool
let endpoint: OptionalResult = mesc::get_endpoint_by_network("5", Some("xyz_tool"));

// get an endpoint by name
let endpoint: OptionalResult = mesc::get_endpoint_by_name("local_goerli");

// parse a user-provided string into a matching endpoint
// (first try 1. endpoint name, then 2. chain id, then 3. network name)
let user_str = "local_goerli";
let endpoint: OptionalResult = mesc::get_endpoint_by_query(user_str, Some("xyz_tool"));

// find all endpoints matching given criteria
let query = mesc::MultiEndpointQuery::new().chain_id("5").unwrap();
let endpoints: MultiResult = mesc::find_endpoints(query);

// get non-endpoint metadata
let metadata: MetadataResult  = mesc::get_global_metadata(Some("xyz_tool"));
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="typescript-mesc-implementation"><a class="header" href="#typescript-mesc-implementation">Typescript MESC Implementation</a></h1>
<p>[WIP]</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
